<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZBrowser</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #22c55e 0%, #86efac 100%);
            display: flex;
            flex-direction: column;
            height: 100vh;
            color: #333;
        }

        .top-bar {
            display: flex;
            align-items: center;
            padding: 8px 15px;
            background-color: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(5px);
            border-bottom: 1px solid #e2e8f0;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }

        .nav-buttons {
            display: flex;
            align-items: center;
            margin-right: 10px;
        }

        .nav-buttons button {
            background-color: transparent;
            border: none;
            color: #555;
            padding: 5px 10px;
            margin: 0 2px;
            cursor: pointer;
            font-size: 18px;
            transition: color 0.2s ease, transform 0.1s ease;
            border-radius: 4px;
        }
        
        .nav-buttons button:hover:not(:disabled) {
            color: #16a34a;
            background-color: #f0fdf4;
        }
        
        .nav-buttons button:active:not(:disabled) {
            transform: scale(0.95);
        }

        .nav-buttons button:disabled {
            color: #ccc;
            cursor: not-allowed;
        }

        .url-bar-container {
            flex-grow: 1;
            display: flex;
            align-items: center;
            background-color: #f0fdf4;
            border-radius: 25px;
            padding: 4px;
            transition: box-shadow 0.3s ease;
        }
        
        .url-bar-container:focus-within {
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.5);
        }

        .url-box {
            flex-grow: 1;
            padding: 8px 15px;
            border: none;
            background: transparent;
            font-size: 15px;
            outline: none;
            color: #333;
        }
        
        .action-buttons {
            display: flex;
            align-items: center;
            margin: 0 5px;
        }
        
        .action-buttons button {
            background: none;
            border: none;
            color: #555;
            cursor: pointer;
            padding: 5px;
            font-size: 18px;
            transition: color 0.2s ease;
        }
        
        .action-buttons button:hover {
            color: #16a34a;
        }
        
        .action-buttons .settings-btn {
            font-size: 20px;
        }

        .search-results-list {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 650px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 12px 12px;
            box-shadow: 0 8px 15px rgba(0,0,0,0.15);
            list-style: none;
            padding: 0;
            margin: 0;
            display: none;
            overflow: hidden;
        }
        
        .search-results-list li {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            transition: background-color 0.2s ease;
            color: #555;
            font-size: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .search-results-list li .remove-btn {
            background: none;
            border: none;
            color: #aaa;
            cursor: pointer;
            font-size: 14px;
            padding: 0 5px;
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        
        .search-results-list li:hover .remove-btn {
            opacity: 1;
        }
        
        .search-results-list li:hover {
            background-color: #f1f5f9;
        }
        
        .search-results-list li:last-child {
            border-bottom: none;
        }

        .main-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: auto;
            color: #fff;
            padding: 20px;
        }
        
        .logo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            opacity: 0.9;
            transition: opacity 0.3s ease;
        }

        .logo-container:hover {
            opacity: 1;
        }
        
        .logo-text {
            font-size: 80px;
            font-weight: 700;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.2);
            margin-bottom: 10px;
        }
        
        .logo-subtitle {
            font-size: 18px;
            font-weight: 300;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.1);
        }
        
        .top-bar .logo-img {
            border-radius: 20px;
            height: 45px;
            margin-right: 10px;
        }

        .settings-page {
            flex-grow: 1;
            display: none;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #fff;
            text-align: center;
            position: relative;
        }
        
        .settings-header {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            max-width: 800px;
        }

        .settings-back-button {
            background-color: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 20px;
            padding: 8px 15px;
            color: #fff;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
        }
        
        .settings-back-button:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .settings-page h1 {
            font-size: 3em;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.2);
            margin: 0;
        }
        
        .settings-section {
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            max-width: 500px;
            width: 100%;
        }
        
        .settings-section h2 {
            margin-top: 0;
            font-size: 1.5em;
            color: #fff;
            border-bottom: 1px solid rgba(255, 255, 255, 0.4);
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        
        .settings-button {
            padding: 10px 20px;
            font-size: 1em;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            background-color: #f87171;
            color: white;
            transition: background-color 0.3s ease, transform 0.1s ease;
        }
        
        .settings-button:hover {
            background-color: #ef4444;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>

    <div class="top-bar">
        <img src="icon.png" class="logo-img" alt="ZBrowser Icon">
        <div class="nav-buttons">
            <button id="backButton" title="Go back">&lt;</button>
            <button id="forwardButton" title="Go forward">&gt;</button>
        </div>
        <div class="url-bar-container">
            <input type="text" id="urlBox" class="url-box" placeholder="Search Google or type a URL">
            <div class="action-buttons">
                 <button id="goButton" title="Go to URL">&#x23CE;</button>
                 <button id="settingsButton" class="settings-btn" title="Settings">&#9881;</button>
            </div>
        </div>
    </div>

    <ul id="searchResultsList" class="search-results-list"></ul>

    <div id="mainContent" class="main-content">
        <div class="logo-container">
            <span class="logo-text">ZBrowser</span>
            <span class="logo-subtitle">A simple, fast browser.</span>
        </div>
    </div>

    <div id="settingsPage" class="settings-page">
        <div class="settings-header">
            <button id="settingsBackButton" class="settings-back-button">Back</button>
            <h1>Settings</h1>
            <div></div> </div>
        <div class="settings-section">
            <h2>Privacy</h2>
            <button id="clearHistoryButton" class="settings-button">Clear History</button>
        </div>
    </div>

    <script>
        const backButton = document.getElementById('backButton');
        const forwardButton = document.getElementById('forwardButton');
        const urlBox = document.getElementById('urlBox');
        const goButton = document.getElementById('goButton');
        const settingsButton = document.getElementById('settingsButton');
        const searchResultsList = document.getElementById('searchResultsList');
        const mainContent = document.getElementById('mainContent');
        const settingsPage = document.getElementById('settingsPage');
        const clearHistoryButton = document.getElementById('clearHistoryButton');
        const settingsBackButton = document.getElementById('settingsBackButton');

        function showView(view) {
            mainContent.style.display = 'none';
            settingsPage.style.display = 'none';
            urlBox.style.display = 'flex';
            
            if (view === 'main') {
                mainContent.style.display = 'flex';
            } else if (view === 'settings') {
                settingsPage.style.display = 'flex';
                urlBox.style.display = 'none';
                searchResultsList.style.display = 'none';
            }
        }

        function updateHistoryButtons() {
            backButton.disabled = history.state === 0 || history.length === 1;
            forwardButton.disabled = history.state === (history.length - 1);
        }

        function handleNavigation(query) {
            if (!query) return;

            if (query.includes('.') && !query.includes(' ')) {
                const url = query.startsWith('http') ? query : `https://${query}`;
                window.location.href = url;
            } else {
                window.location.href = `https://www.google.com/search?q=${encodeURIComponent(query)}`;
            }
            saveSearch(query);
            urlBox.value = '';
        }
        
        backButton.addEventListener('click', () => {
            window.history.back();
            if (settingsPage.style.display === 'flex') {
                showView('main');
            }
        });

        forwardButton.addEventListener('click', () => {
            window.history.forward();
        });

        urlBox.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                handleNavigation(urlBox.value.trim());
            }
        });
        
        goButton.addEventListener('click', () => {
            handleNavigation(urlBox.value.trim());
        });
        
        settingsButton.addEventListener('click', () => {
            showView('settings');
        });

        settingsBackButton.addEventListener('click', () => {
            showView('main');
        });

        const recentSearchesKey = 'recentSearches';
        
        function getRecentSearches() {
            try {
                const searches = JSON.parse(localStorage.getItem(recentSearchesKey)) || [];
                return searches;
            } catch (e) {
                return [];
            }
        }

        function saveSearch(query) {
            if (!query) return;
            let searches = getRecentSearches();
            searches = searches.filter(s => s.toLowerCase() !== query.toLowerCase());
            searches.unshift(query);
            searches = searches.slice(0, 5);
            localStorage.setItem(recentSearchesKey, JSON.stringify(searches));
        }

        function removeSearch(query) {
            let searches = getRecentSearches();
            searches = searches.filter(s => s !== query);
            localStorage.setItem(recentSearchesKey, JSON.stringify(searches));
            displayRecentSearches(urlBox.value.trim());
        }

        function clearHistory() {
            localStorage.removeItem(recentSearchesKey);
            displayRecentSearches('');
        }

        function displayRecentSearches(input) {
            const searches = getRecentSearches();
            
            let filteredSearches = searches.filter(s => s.toLowerCase().startsWith(input.toLowerCase()));
            
            searchResultsList.innerHTML = '';
            
            if (filteredSearches.length > 0 && mainContent.style.display === 'flex') {
                filteredSearches.forEach(search => {
                    const li = document.createElement('li');
                    const span = document.createElement('span');
                    span.textContent = search;
                    span.addEventListener('click', () => {
                        handleNavigation(search);
                    });
                    const removeBtn = document.createElement('button');
                    removeBtn.textContent = '❌';
                    removeBtn.classList.add('remove-btn');
                    removeBtn.title = 'Remove from history';
                    removeBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        removeSearch(search);
                    });
                    li.appendChild(span);
                    li.appendChild(removeBtn);
                    searchResultsList.appendChild(li);
                });
                searchResultsList.style.display = 'block';
            } else {
                searchResultsList.style.display = 'none';
            }
        }
        
        urlBox.addEventListener('input', (event) => {
            displayRecentSearches(event.target.value.trim());
        });
        
        urlBox.addEventListener('focus', () => {
            displayRecentSearches(urlBox.value.trim());
        });
        
        urlBox.addEventListener('blur', () => {
            setTimeout(() => {
                searchResultsList.style.display = 'none';
            }, 200);
        });

        clearHistoryButton.addEventListener('click', () => {
            clearHistory();
            alert('Your history has been cleared!');
        });
        
        document.addEventListener('DOMContentLoaded', () => {
            history.replaceState(0, '');
            updateHistoryButtons();
            showView('main');
        });

        window.addEventListener('popstate', () => {
            updateHistoryButtons();
            if (settingsPage.style.display === 'flex' && window.location.hash !== '#settings') {
                 showView('main');
            }
        });

        window.addEventListener('load', () => {
            updateHistoryButtons();
        });
    </script>
</body>
</html>
